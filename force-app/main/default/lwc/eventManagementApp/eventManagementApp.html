<template>
  <lightning-card>
    <div class="slds-p-around_medium">
      <!-- Header -->
      <div
        class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-m-bottom_medium"
      >
        <h1 class="slds-text-heading_large">
          <lightning-icon
            icon-name="utility:event"
            size="medium"
            class="slds-m-right_x-small"
          ></lightning-icon>
          Event Management
        </h1>
        <template lwc:if={isListView}>
          <div class="slds-grid slds-grid_vertical-align-center">
            <lightning-combobox
              label="Status"
              value={statusFilter}
              options={statusFilterOptions}
              onchange={handleStatusFilterChange}
              variant="label-hidden"
              class="slds-m-right_small"
            ></lightning-combobox>
            <lightning-button
              variant="brand"
              label="New Event"
              icon-name="utility:add"
              onclick={handleNewEvent}
            ></lightning-button>
          </div>
        </template>
      </div>

      <!-- List View -->
      <template lwc:if={isListView}>
        <template lwc:if={isLoading}>
          <lightning-spinner
            alternative-text="Loading events..."
          ></lightning-spinner>
        </template>
        <template lwc:else>
          <c-event-list
            events={filteredEvents}
            onselectevent={handleSelectEvent}
          ></c-event-list>
        </template>
      </template>

      <!-- Detail View -->
      <template lwc:if={isDetailView}>
        <c-event-detail
          event={selectedEvent}
          onback={handleBackToList}
          oneditevent={handleEditEvent}
          ondeleteevent={handleDeleteEvent}
        ></c-event-detail>
      </template>
    </div>
  </lightning-card>
</template>
